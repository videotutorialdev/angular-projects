<div class="container my-4">
  <h4>Welcome to Angular Custom Validators Tutorial</h4>
  <p>Let's validate our forms with Our Angular Custom Validators</p>

  <div class="form-group">
    <input type="text" class="form-control" [formControl]="formControlName" />
  </div>
  <div class="d-flex justify-content-end">
    <ngid-button (onClick)="handleDisableOrEnableForm()">
      {{ isDisabled ? "Enabled" : "Disabled" }}
      {{
        formControlName.value
          ? "formControl '" + formControlName.value + "'"
          : "Form"
      }}
    </ngid-button>
  </div>
  <form [formGroup]="formGroup">
    <div class="form-group">
      <label for="captcha">Captcha - Answer</label>
      <input
        type="text"
        class="form-control"
        formControlName="captcha"
        [ngClass]="[
          (formGroup.get('captcha').dirty ||
            formGroup.get('captcha').touched) &&
          formGroup.get('captcha').invalid
            ? 'is-invalid'
            : '',
          (formGroup.get('captcha').dirty || formGroup.get('name').touched) &&
          formGroup.get('captcha').valid
            ? 'is-valid'
            : ''
        ]"
      />
      <small
        class="text-danger"
        *ngIf="
          (formGroup.get('captcha').dirty ||
            formGroup.get('captcha').touched) &&
          formGroup.get('captcha').invalid
        "
      >
        {{ formGroup.get("captcha").errors.message }}
      </small>
    </div>

    <div class="form-group">
      <label for="name" class="required">Name</label>
      <input
        type="text"
        class="form-control"
        id="name"
        formControlName="name"
        [ngClass]="[
          (formGroup.get('name').dirty || formGroup.get('name').touched) &&
          formGroup.get('name').invalid
            ? 'is-invalid'
            : '',
          (formGroup.get('name').dirty || formGroup.get('name').touched) &&
          formGroup.get('name').valid
            ? 'is-valid'
            : ''
        ]"
      />
      <small
        class="text-danger"
        *ngIf="
          (formGroup.get('name').dirty || formGroup.get('name').touched) &&
          formGroup.get('name').invalid
        "
      >
        {{ formGroup.get("name").errors.message }}
      </small>
    </div>

    <div class="form-group">
      <label for="password" class="required">Password</label>
      <input
        type="password"
        class="form-control"
        id="password"
        formControlName="password"
        [ngClass]="[
          (formGroup.get('password').dirty ||
            formGroup.get('password').touched) &&
          formGroup.get('password').invalid
            ? 'is-invalid'
            : '',
          (formGroup.get('password').dirty ||
            formGroup.get('password').touched) &&
          formGroup.get('password').valid
            ? 'is-valid'
            : ''
        ]"
      />
      <small
        class="text-danger"
        *ngIf="
          (formGroup.get('password').dirty ||
            formGroup.get('password').touched) &&
          formGroup.get('password').invalid
        "
      >
        {{
          formGroup.get("password").errors.required
            ? "Data Must Be Filled"
            : formGroup.get("password").errors.minlength
            ? "Min Length Required is " +
              formGroup.get("password").errors.minlength.requiredLength +
              " Characters"
            : "Max Length Required is " +
              formGroup.get("password").errors.maxlength.requiredLength +
              " Characters"
        }}
      </small>
    </div>

    <div class="form-group">
      <label for="birthDate">Birth Date</label>
      <input
        type="text"
        class="form-control"
        formControlName="birthDate"
        [ngClass]="[
          (formGroup.get('birthDate').touched ||
            formGroup.get('birthDate').dirty) &&
          formGroup.get('birthDate').invalid
            ? 'is-invalid'
            : '',
          (formGroup.get('birthDate').touched ||
            formGroup.get('birthDate').dirty) &&
          formGroup.get('birthDate').valid
            ? 'is-valid'
            : ''
        ]"
      />
      <small class="text-danger" *ngIf="formGroup.get('birthDate').invalid">
        {{
          formGroup.get("birthDate").errors.min
            ? "Minimum Year is " + formGroup.get("birthDate").errors.min.min
            : formGroup.get("birthDate").errors.max
            ? "Maximum Year is " + formGroup.get("birthDate").errors.max.max
            : "Birth Date Should Be An Integer With Actual Length 4 Characters"
        }}
      </small>
    </div>
    <div class="form-group">
      <label for="name" class="required">Email</label>
      <input
        type="text"
        class="form-control"
        id="email"
        formControlName="email"
        [ngClass]="[
          (formGroup.get('email').dirty || formGroup.get('email').touched) &&
          formGroup.get('email').invalid
            ? 'is-invalid'
            : '',
          (formGroup.get('email').dirty || formGroup.get('email').touched) &&
          formGroup.get('email').valid
            ? 'is-valid'
            : ''
        ]"
      />
      <small
        class="text-danger"
        *ngIf="
          (formGroup.get('email').dirty || formGroup.get('email').touched) &&
          formGroup.get('email').invalid
        "
      >
        {{
          formGroup.get("email").errors.required
            ? "Data must be filled"
            : "Email address is not valid"
        }}
      </small>
    </div>
    <div class="form-group">
      <label for="age">Age</label>
      <input
        type="number"
        class="form-control"
        id="age"
        formControlName="age"
        [ngClass]="[
          (formGroup.get('age').dirty || formGroup.get('age').touched) &&
          formGroup.get('age').invalid
            ? 'is-invalid'
            : '',
          (formGroup.get('age').dirty || formGroup.get('age').touched) &&
          formGroup.get('age').valid
            ? 'is-valid'
            : ''
        ]"
      />
      <small
        class="text-danger"
        *ngIf="
          (formGroup.get('age').dirty || formGroup.get('age').touched) &&
          formGroup.get('age').invalid
        "
      >
        Data Must Be Filled
      </small>
    </div>
    <div class="form-group">
      <label for="address">Address</label>
      <textarea
        type="text"
        class="form-control"
        id="address"
        formControlName="address"
        [ngClass]="[
          (formGroup.get('address').dirty ||
            formGroup.get('address').touched) &&
          formGroup.get('address').invalid
            ? 'is-invalid'
            : '',
          (formGroup.get('address').dirty ||
            formGroup.get('address').touched) &&
          formGroup.get('address').valid
            ? 'is-valid'
            : ''
        ]"
      >
      </textarea>
      <small
        class="text-danger"
        *ngIf="
          (formGroup.get('address').dirty ||
            formGroup.get('address').touched) &&
          formGroup.get('address').invalid
        "
      >
        Data Must Be Filled
      </small>
    </div>
    <div class="form-group">
      <label for="name">Gender</label>
      <div
        class="custom-control custom-radio"
        *ngFor="let gender of genderList; let i = index"
      >
        <input
          type="radio"
          id="{{ 'gender' + i }}"
          class="custom-control-input"
          [value]="gender"
          [checked]="formGroup.get('gender').value?.id === gender.id"
          (change)="handleChangeGender(gender)"
          [disabled]="formGroup.get('gender').disabled"
          [ngClass]="[
            (formGroup.get('gender').dirty ||
              formGroup.get('gender').touched) &&
            formGroup.get('gender').invalid
              ? 'is-invalid'
              : '',
            (formGroup.get('gender').dirty ||
              formGroup.get('gender').touched) &&
            formGroup.get('gender').valid
              ? 'is-valid'
              : ''
          ]"
        />
        <label for="{{ 'gender' + i }}" class="custom-control-label">
          {{ gender.name }}
        </label>
      </div>
      <small
        class="text-danger"
        *ngIf="
          (formGroup.get('gender').dirty || formGroup.get('skills').touched) &&
          formGroup.get('gender').invalid
        "
      >
        Data Must Be Filled
      </small>
    </div>
    <div class="form-group">
      <label for="name">Skills</label>
      <div
        class="custom-control custom-checkbox"
        *ngFor="let skill of skillList; let i = index"
      >
        <input
          type="checkbox"
          id="{{ 'skill' + i }}"
          class="custom-control-input"
          (change)="handleChangeSkill($event.target.checked, i)"
          [checked]="isChecked(formGroup.get('skills').value, skill)"
          [disabled]="formGroup.get('skills').disabled"
          [ngClass]="[
            (formGroup.get('skills').dirty ||
              formGroup.get('skills').touched) &&
            formGroup.get('skills').invalid
              ? 'is-invalid'
              : '',
            (formGroup.get('skills').dirty ||
              formGroup.get('skills').touched) &&
            formGroup.get('skills').valid
              ? 'is-valid'
              : ''
          ]"
        />
        <label for="{{ 'skill' + i }}" class="custom-control-label">
          {{ skill.name }}
        </label>
      </div>
      <small
        class="text-danger"
        *ngIf="
          (formGroup.get('skills').dirty || formGroup.get('skills').touched) &&
          formGroup.get('skills').invalid
        "
      >
        Data Must Be Filled
      </small>
    </div>
    <div class="form-group">
      <label for="name">Country</label>
      <select
        [compareWith]="handleCompareCountry"
        class="custom-select"
        formControlName="country"
        [ngClass]="[
          (formGroup.get('country').dirty ||
            formGroup.get('country').touched) &&
          formGroup.get('country').invalid
            ? 'is-invalid'
            : '',
          (formGroup.get('country').dirty ||
            formGroup.get('country').touched) &&
          formGroup.get('country').valid
            ? 'is-valid'
            : ''
        ]"
      >
        <option value="null">Select Country</option>
        <option [ngValue]="country" *ngFor="let country of countryList">
          {{ country.name }}
        </option>
      </select>
      <small
        class="text-danger"
        *ngIf="
          (formGroup.get('country').dirty ||
            formGroup.get('country').touched) &&
          formGroup.get('country').invalid
        "
      >
        Data Must Be Filled
      </small>
    </div>

    <div
      class="p-4 border border-rounded mb-4"
      formArrayName="questionAnswerList"
    >
      <h4>Dynamic Form Section: Question & Answer</h4>
      <div
        class="form-group"
        *ngFor="
          let formGroupQuestionAnswer of questionAnswerListFormArray.controls;
          let i = index
        "
        [formGroup]="formGroupQuestionAnswer"
      >
        <label for="question1"
          ><strong>Question {{ i + 1 }}: </strong>
          <em
            class="fas fa-times text-danger"
            (click)="handleDeleteQuestionAnswerItem(i)"
            style="cursor: pointer"
          ></em>
        </label>
        <input
          type="text"
          class="form-control mb-2"
          formControlName="question"
          placeholder="Question"
        />
        <input
          type="text"
          class="form-control"
          formControlName="answer"
          placeholder="Answer"
        />
      </div>
      <ngid-button (onClick)="handleAddNewQuestionAnswer()"
        >Add New Question Answer</ngid-button
      >
    </div>

    <div class="p-4 border border-rounded" formArrayName="questionAnswerList">
      <h4>Dynamic Form Section: Hobbies</h4>
      <div
        class="form-group"
        *ngFor="let formControl of hobbiesListFormArray.controls; let i = index"
      >
        <label for="question1"
          ><strong>Hobbie {{ i + 1 }}: </strong>
          <em
            class="fas fa-times text-danger"
            (click)="handleDeleteHobbieItem(i)"
            style="cursor: pointer"
          ></em>
        </label>
        <input
          type="text"
          class="form-control mb-2"
          [formControl]="formControl"
          placeholder="Hobbie"
        />
      </div>
      <ngid-button (onClick)="handleAddNewHobbie()">Add New Hobbie</ngid-button>
    </div>
  </form>
  <div class="btn-group btn-group-right mt-4">
    <ngid-button color="SECONDARY" (onClick)="handleCancel()">
      Cancel
    </ngid-button>
    <ngid-button color="WARNING" (onClick)="handleReset()">Reset</ngid-button>
    <ngid-button (onClick)="handleSubmit()">Submit</ngid-button>
  </div>
</div>
